# TG-бот для тестового задания

---
## Тех. задание:
### Напишите телеграмм-бота на языке Python, который будет выполнять следующие функции:

1. Приветствовать пользователя и предлагать ему выбрать определенную функцию бота.
2. Определить текущую погоду в определенном городе, используя публичное API погоды (например, OpenWeatherMap) и выдавать пользователю соответствующую информацию.
3. Конвертировать валюты, используя публичное API курсов валют (например, Exchange Rates API) и предоставлять пользователю результат конвертации.
4. Отправлять случайную картинку с милыми животными
5. Создавать опросы (polls) и отправлять их в групповой чат с определенным вопросом и вариантами ответов.

### Требования:

1. Бот должен быть реализован на языке Python с использованием библиотеки aiogram.
2. Бот должен быть оформлен в виде отдельного модуля или пакета.
3. Бот должен быть устойчив к ошибкам пользователя и корректно обрабатывать исключительные ситуации.
4. Код бота должен быть чистым, асинхронным, хорошо организованным и содержать комментарии, объясняющие логику работы.
5. Бот должен успешно выполнять все описанные функции.

---

## Список используемых API:
* [API для изображений](https://api-ninjas.com)
* [API для погоды](https://openweathermap.org/api)
* [API для курса валют](https://apilayer.com/marketplace/exchangerates_data-api)

---

## Запуск проекта

1. Склонировать репозиторий 

`git clone https://github.com/Vendetta-source/tg_bot_polls_currency_weather.git`

2. Получить API KEY в вышеуказанных сервисах, а также создать бота в BotFather.

   В настройках бота в BotFather включить поддержку Inline (обязательно).


3. Создать файл `.env` в директории:
```dotenv
WEATHER_API_KEY=<your_api_token_from_OpenWeatherMap>
BOT_TOKEN=<your_api_token_from_BotFather>
EXCHANGE_API_KEY=<your_api_token_from_>
PHOTOS_API_KEY=<your_api_token_from_photos>
```
4. Установить зависимости:

```pip install -r requirements.txt```

5. Запустить файл `main.py`

---

## Основные функции и взаимодействие с ботом

### Главный экран
![main](https://user-images.githubusercontent.com/63292154/233443033-46a668b9-c956-4de6-aef9-f08bfe7fdcfd.png)

### Изображение животного
![photo](https://user-images.githubusercontent.com/63292154/233443052-f48c6429-7310-43f2-b772-3815da103f34.png)

### Погода
![weather](https://user-images.githubusercontent.com/63292154/233443085-dfaa2ff6-7eaf-4771-8b9a-b5345689ae3e.png)

### Курс валюты
![currency](https://user-images.githubusercontent.com/63292154/233443105-91611273-9a6c-4398-ac07-354757603443.png)

### Опросы

#### 1. Состояние при нажатии на кнопку создать опрос
![polls1](https://user-images.githubusercontent.com/63292154/233443130-1719a1f1-ddcc-4708-b709-9c26da16b43c.png)

#### 2. Опрос создан
![polls2](https://user-images.githubusercontent.com/63292154/233443156-a9a25706-2aae-476b-90ab-1e87d5465486.png)

#### 3. Чтобы переслать опрос в группу необходимо в боте начать вводить имя бота. Далее появится подсказка с именем бота. Нажать на нее. Далее появится следующее Inline-окно с выбором опроса. Выбираем необходимый запрос.
![polls3](https://user-images.githubusercontent.com/63292154/233443165-0cf620c1-9d49-467f-9367-e21baabe4148.png)

#### 4. Выбираем группу, в которую отправить опрос
![polls4](https://user-images.githubusercontent.com/63292154/233443190-bb28a199-cb71-4a99-9d01-a10d7dac589c.png)

#### 5. Опрос отправлен в группу
![polls5](https://user-images.githubusercontent.com/63292154/233443205-abd37435-5b9e-40cb-9540-81aa6b5a2c6a.png)

